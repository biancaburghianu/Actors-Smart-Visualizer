<html>

<head>
    <title>Register</title>
    <link rel="stylesheet" href="login.css" />
</head>

<body>
    <div class="container">
        <div class="card">
            <div class="inner-box" id="card">
                <div class="card-front">
                    <h2>Register</h2>
                    <p>Actors Smart Visualizer</p>
                    <p>
                        Un site destinat previzualizarii statisticilor in urma
                        norminalizarilor la Screen Actors Guild Awards.
                    </p>
                    <form action="" method="POST" id="form">
                        <input type="username" class="input-box" id="username" placeholder="Username" required />
                        <input type="password" class="input-box" id="password" placeholder="Password" required />
                        <input type="submit" class="submit-btn" value="Create account" />
                    </form>
                    <input type="button" class="submit-btn" value="Login"
                        onClick="window.location.href='http://localhost:3456/login'" />
                </div>
            </div>
            <script>
                const registerForm = document.getElementById("form");
                console.log(123)
                registerForm.addEventListener("submit", (event) => {
                    event.preventDefault();

                    const username = document.getElementById("username").value;
                    const password = document.getElementById("password").value;
                    console.log(username, password);

                    const xhr = new XMLHttpRequest();
                    const url = "http://localhost:3456/register";
                    xhr.open("POST", url, true);
                    xhr.setRequestHeader("Content-Type", "application/json");
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4) {
                            if (xhr.status === 200) {
                                alert("Contul a fost creat cu succes, intoarce-te la pagina de login pentru a te autentifica.");
                            } else {
                                alert("S-a produs o eroare la crearea contului.");
                            }
                        }
                    };
                    const data = JSON.stringify({ username, password });
                    xhr.send(data);
                });
            </script>
</body>

</html>